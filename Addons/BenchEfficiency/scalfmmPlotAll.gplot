#!/usr/bin/gnuplot
reset
set terminal png
set output filename . '.png'

set xlabel "Nb Threads"

set ylabel "Efficiency"

set grid

set style data linespoints

N = system("awk 'NR==1{print NF}' " . filename . ".data")

set key outside;
set key right top;

set key autotitle columnhead

do for [col=2:N:1] {
    set style line col lw 3
}

plot for [col=2:N:1] filename . '.data' using 1:col with lp
